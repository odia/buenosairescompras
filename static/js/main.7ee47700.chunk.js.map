{"version":3,"sources":["Loading.tsx","Highlights.tsx","SearchBox.tsx","DataLoader.tsx","App.tsx","reportWebVitals.ts","index.tsx","worker.ts"],"names":["Loading","text","progress","undefined","type","value","readOnly","name","min","max","step","Highlights","h","highlights","map","i","arr","substring","length","s","SearchBox","searchResults","search","useState","criteria","setCriteria","useEffect","onChange","e","target","r","href","searchResult","id","rel","DataLoader","setProgress","loading","setLoading","failed","setFailed","ready","setReady","workerInstance","setWorkerInstance","setSearchResults","worker","a","addEventListener","data","t","params","console","error","init","onClick","setMinisearches","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","addMethods","methods","module","exports","w","Worker"],"mappings":"2KAaeA,MAXf,YAAkG,IAA/EC,EAA8E,EAA9EA,KAAMC,EAAwE,EAAxEA,SACvB,OACE,8BACGD,GAAQ,aACT,4BACcE,IAAbD,GAA0B,uBAAOE,KAAK,QAAQC,MAAkB,IAAXH,EAAiBI,UAAQ,EAACC,KAAK,SAASC,IAAI,IAAIC,IAAI,OAAOC,KAAK,WACxGP,IAAbD,GAA0B,qBCmBlBS,EApB8C,SAAC,GAAoB,IAC1EC,EADyE,EAAjBC,WACzCC,KAAI,SAACF,EAAGG,EAAGC,GAC9B,OAAU,IAAND,EACKH,EAAEK,UAAUL,EAAEM,OAJJ,IAMVH,IAAMC,EAAIE,OAAS,EACnBN,EAAEK,UAAU,EAPF,IAQRF,EAAI,IAAM,EACZH,EAAEK,UAAU,EATF,IASuB,MAAQL,EAAEK,UAAUL,EAAEM,OAT7C,IAWZ,4BAAIN,OAGb,OACE,mCACGA,EAAEE,KAAI,SAACK,EAAGJ,GAAJ,OAAW,+BAAeI,GAAJJ,SCoBpBK,EA3B4C,SAAC,GAA+B,IAA7BC,EAA4B,EAA5BA,cAAeC,EAAa,EAAbA,OAC3E,EAAgCC,mBAAS,IAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KASA,OAPAC,qBAAU,WACJF,EAASN,OAAS,GAGtBI,EAAOE,KACN,CAACA,EAAUF,IAGZ,qCACE,uBAAOlB,KAAK,OAAOC,MAAOmB,EAAUG,SAAU,SAACC,GAAD,OAAOH,EAAYG,EAAEC,OAAOxB,UACzEgB,EAAcH,OAAS,GAAM,gCAC3BG,EAAcP,KAAI,SAACgB,GAAD,OACjB,+BACE,6BAAI,mBAAGC,KAAMD,EAAEE,aAAaC,GAAIJ,OAAO,SAASK,IAAI,aAAhD,SAA8DJ,EAAEE,aAAa,0BACjF,6BAAKF,EAAEE,aAAa,kBACpB,6BAAKF,EAAEE,aAAa,wBACpB,6BAAI,cAAC,EAAD,CAAYnB,WAAYiB,EAAEjB,iBAJvBiB,EAAEE,aAAaC,a,gBCsCnBE,EA1D+C,WAC5D,MAAgCZ,qBAAhC,mBAAOrB,EAAP,KAAiBkC,EAAjB,KACA,EAA8Bb,oBAAS,GAAvC,mBAAOc,EAAP,KAAgBC,EAAhB,KACA,EAA4Bf,oBAAS,GAArC,mBAAOgB,EAAP,KAAeC,EAAf,KACA,EAA0BjB,oBAAS,GAAnC,mBAAOkB,EAAP,KAAcC,EAAd,KACA,EAA4CnB,mBAAS,MAArD,mBAAOoB,EAAP,KAAuBC,EAAvB,KACA,EAA0CrB,mBAAS,IAAnD,mBAAOF,EAAP,KAAsBwB,EAAtB,KAUAnB,qBAAU,WACJiB,GACJC,EAAkBE,SACjB,CAACH,IAEJ,IAAMlB,EAAW,uCAAG,WAAOD,GAAP,SAAAuB,EAAA,kEAClBF,EADkB,SACKF,EAAerB,OAAOE,GAD3B,6EAAH,sDAuBjB,OAnBAE,qBAAU,YACJW,GAAYM,IAChBL,GAAW,GAEXK,EAAeK,iBAAiB,WAAW,YAAe,IAAZC,EAAW,EAAXA,KAE5C,EAAoB,CAACA,EAAK,GAAIA,EAAK,IAA5BC,EAAP,KAAUC,EAAV,KACA,GAAKD,EACL,OAAQA,GACN,IAAK,YAAaV,EAAUW,GAAS,MACrC,IAAK,cAAef,EAAYe,GAAS,MACzC,IAAK,WAAYT,EAASS,GAAS,MACnC,QAASC,QAAQC,MAAM,4BAA8BH,OAIzDP,EAAeW,UACd,CAACjB,EAASM,IAGX,mCACGJ,EAEG,qDAEE,wBAAQgB,QAAS,kBAzCzBC,gBAAgB,IAChBpB,EAAY,GACZI,GAAU,GACVF,GAAW,QACXI,GAAS,IAqCD,2BAGFD,EAAoG,cAAC,EAAD,CAAWpB,cAAeA,EAAeC,OAAQG,IAA7I,cAAC,EAAD,CAASxB,KAAmB,IAAbC,EAAiB,eAAiB,iBAAkBA,SAAUA,OCjDhFuD,MAVf,WACE,MAA0BlC,oBAAS,GAAnC,mBAAOkB,EAAP,KAAcC,EAAd,KACA,OACE,sCACID,GAAS,wBAAQc,QAAS,kBAAMb,GAAS,IAAhC,wDACVD,GAAS,cAAC,EAAD,QCKDiB,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCJdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,K,kBCdI,IAAIc,EAAa,EAAQ,IACrBC,EAAU,CAAC,OAAO,UACtBC,EAAOC,QAAU,WAChB,IAAIC,EAAI,IAAIC,OAAO,IAA0B,iCAAkC,CAAEtE,KAAM,qBAGvF,OAFAiE,EAAWI,EAAGH,GAEPG,K","file":"static/js/main.7ee47700.chunk.js","sourcesContent":["import React from 'react';\n\nfunction Loading({ text, progress }: { text: string | undefined, progress: number | undefined }) {\n  return (\n    <p>\n      {text || 'Loading...'}\n      <br />\n      {progress !== undefined && <input type=\"range\" value={progress * 1000} readOnly name=\"volume\" min=\"0\" max=\"1000\" step=\"1\" />}\n      {progress === undefined && 'unknown length'}\n    </p>\n  )\n}\n\nexport default Loading;\n","import React from 'react'\n\nexport interface HighlightsProps {\n  highlights: string[]\n}\n\nconst CONTEXT_LENGTH = 40\nconst Highlights: React.FunctionComponent<HighlightsProps> = ({ highlights }) => {\n  const h = highlights.map((h, i, arr) => {\n    if (i === 0) {\n      return h.substring(h.length-CONTEXT_LENGTH)\n    }\n    else if (i === arr.length - 1) {\n      return h.substring(0, CONTEXT_LENGTH)\n    } else if (i % 2 === 0) {\n      return h.substring(0, CONTEXT_LENGTH) + '...' + h.substring(h.length-CONTEXT_LENGTH)\n    }\n    return <b>{h}</b>\n  })\n\n  return (\n    <>\n      {h.map((s, i) => (<span key={i}>{s}</span>))}\n    </>\n  )\n}\n\nexport default Highlights\n","import React, { useState, useEffect } from 'react'\nimport { SearchResult } from 'minisearch'\nimport Highlights from './Highlights'\n\nexport interface SearchBoxProps {\n  searchResults: ExtendedSearchResult[]\n  search: (s: string) => void\n}\n\ninterface ExtendedSearchResult {\n  searchResult: SearchResult\n  text: string\n  highlights: string[]\n}\n\nconst SearchBox: React.FunctionComponent<SearchBoxProps> = ({ searchResults, search }) => {\n  const [criteria, setCriteria] = useState('')\n\n  useEffect(() => {\n    if (criteria.length < 3) {\n      return\n    }\n    search(criteria)\n  }, [criteria, search])\n\n  return (\n    <>\n      <input type=\"text\" value={criteria} onChange={(e) => setCriteria(e.target.value)} />\n      {searchResults.length > 0 && (<table>\n        {searchResults.map((r) => (\n          <tr key={r.searchResult.id}>\n            <td><a href={r.searchResult.id} target=\"_blank\" rel=\"noreferrer\">{r.searchResult['tender/description']}</a></td>\n            <td>{r.searchResult['tender/title']}</td>\n            <td>{r.searchResult['tender/description']}</td>\n            <td><Highlights highlights={r.highlights} /></td>\n          </tr>\n        ))}\n      </table>)}\n    </>\n  )\n}\n\nexport default SearchBox\n","import React, { useState, useEffect } from 'react'\n\nimport Loading from './Loading'\nimport SearchBox from './SearchBox'\n// eslint-disable-next-line import/no-webpack-loader-syntax\nimport worker from 'workerize-loader!./worker'\n\nexport interface DataLoaderProps {\n}\n\nconst DataLoader : React.FunctionComponent<DataLoaderProps> = () => {\n  const [progress, setProgress] = useState<number>()\n  const [loading, setLoading] = useState(false)\n  const [failed, setFailed] = useState(false)\n  const [ready, setReady] = useState(false)\n  const [workerInstance, setWorkerInstance] = useState(null)\n  const [searchResults, setSearchResults] = useState([])\n\n  const retry = () => {\n    setMinisearches([])\n    setProgress(0)\n    setFailed(false)\n    setLoading(false)\n    setReady(false)\n  }\n\n  useEffect(() => {\n    if (workerInstance) return\n    setWorkerInstance(worker())\n  }, [workerInstance])\n\n  const setCriteria = async (criteria: string) => {\n    setSearchResults(await workerInstance.search(criteria))\n  }\n\n  useEffect(() => {\n    if (loading || !workerInstance) return;\n    setLoading(true);\n\n    workerInstance.addEventListener(\"message\", ({ data }) => {\n      // I don't know why `const [t, params] = data` does not work\n      const [t, params] = [data[0], data[1]]\n      if (!t) return\n      switch (t) {\n        case 'setFailed': setFailed(params); break\n        case 'setProgress': setProgress(params); break\n        case 'setReady': setReady(params); break\n        default: console.error('unexpected message type: ' + t); break\n      }\n    })\n\n    workerInstance.init()\n  }, [loading, workerInstance])\n\n  return (\n    <>\n      {failed ?\n        (\n          <p>\n            Fall√≥ la descarga\n            <button onClick={() => retry()}>Reintentar</button>\n          </p>\n        ) :\n        (!ready ? <Loading text={progress === 1 ? 'Preparing...' : 'Downloading...'} progress={progress} /> : <SearchBox searchResults={searchResults} search={setCriteria} />)\n      }\n    </>\n  )\n}\nexport default DataLoader\n","import React, { useState } from 'react';\n\nimport DataLoader from './DataLoader'\n\nfunction App() {\n  const [ready, setReady] = useState(false)\n  return (\n    <>\n      {!ready && <button onClick={() => setReady(true)}>Listo para descargar muchos megas de datos</button>}\n      {ready && <DataLoader />}\n    </>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","\n\t\t\t\tvar addMethods = require(\"../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"init\",\"search\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"c4c3d0a728594c6fe935.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t"],"sourceRoot":""}