(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{20:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(6),a=n.n(s),u=n(2),i=n(3),o=n.n(i),d=n(5),j=n(9),h=n(10),l=n(0);var b=function(e){var t=e.progress;return Object(l.jsxs)("p",{children:["Loading...",Object(l.jsx)("br",{}),void 0!==t&&Object(l.jsx)("input",{type:"range",value:1e3*t,readOnly:!0,name:"volume",min:"0",max:"1000",step:"1"}),void 0===t&&"unknown length"]})},f=n(7),g=n(8),p=function(e){var t=e.highlights.map((function(e,t,n){return 0===t?e.substring(e.length-40):t===n.length-1?e.substring(0,40):t%2===0?e.substring(0,40)+"..."+e.substring(e.length-40):Object(l.jsx)("b",{children:e})}));return Object(l.jsx)(l.Fragment,{children:t.map((function(e,t){return Object(l.jsx)("span",{children:e},t)}))})},O=function(e){var t=e.minisearches,n=Object(r.useState)(""),c=Object(u.a)(n,2),s=c[0],a=c[1],i=Object(r.useState)([]),o=Object(u.a)(i,2),d=o[0],j=o[1];return Object(r.useEffect)((function(){s.length<3?j([]):j(t.flatMap((function(e){return e.search(s,{fuzzy:.2})})).sort((function(e,t){return-(e.score-t.score)})).slice(0,10).map((function(e){var t=Object(f.decompress)(e.compressed)||"",n=Object(g.fuzzyMatch)(t,s);return{searchResult:e,text:t,highlights:n?n.highlights:[]}})))}),[s,t]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("input",{type:"text",value:s,onChange:function(e){return a(e.target.value)}}),d.length>0&&Object(l.jsx)("table",{children:d.map((function(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("a",{href:e.searchResult.id,target:"_blank",rel:"noreferrer",children:e.searchResult["tender/description"]})}),Object(l.jsx)("td",{children:e.searchResult["tender/title"]}),Object(l.jsx)("td",{children:e.searchResult["tender/description"]}),Object(l.jsx)("td",{children:Object(l.jsx)(p,{highlights:e.highlights})})]},e.searchResult.id)}))})]})},m={fields:["content"],storeFields:["tender/title","tender/description","tender/status","tender/value/currency","tender/value/amount","tender/procuringEntity/name","tender/procurementMethodDetails","tender/mainProcurementCategory","tender/tenderPeriod/startDate","tender/tenderPeriod/endDate","tender/tenderPeriod/durationInDays","tender/enquiryPeriod/startDate","tender/enquiryPeriod/endDate","tender/enquiryPeriod/durationInDays","tender/documents/0/url"].concat(["compressed"])},x=function(e,t){for(var n=[],r=e;r<=t;r++)n.push(r);return n},v=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(),a=Object(u.a)(s,2),i=a[0],f=a[1],g=Object(r.useState)(!1),p=Object(u.a)(g,2),v=p[0],y=p[1];return Object(r.useEffect)((function(){v||(y(!0),Object(d.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x(0,10).map((function(){return 0})),n=x(0,10).map((function(){return 0})),r=function(){t.some((function(e){return 0===e}))||f(n.reduce((function(e,t){return e+t}),0)/t.reduce((function(e,t){return e+t}),0))},e.t0=c,e.next=6,Promise.all(x(0,10).map((function(e){var c=new Headers;c.append("Range","bytes=0-104857600");var s=new Request("/data/index".concat(e,".json"),{headers:c});return fetch(s).then((function(c){var s=c.headers.get("content-range"),a=0;return s&&s.includes("/")&&(a=parseInt(s.split("/")[1]),t[e]=a,r()),Object(h.a)({onProgress:function(t){n[e]=t.transferred,r()},onError:function(e){console.error(e)}})(c)})).then((function(e){return e.blob()})).then(function(){var t=Object(d.a)(o.a.mark((function t(c){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n[e]=c.size,r(),t.t0=j.a,t.next=5,c.text();case 5:return t.t1=t.sent,t.t2=m,t.abrupt("return",t.t0.loadJSON.call(t.t0,t.t1,t.t2));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})));case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})))())}),[v]),Object(l.jsx)(l.Fragment,{children:0===n.length?Object(l.jsx)(b,{progress:i}):Object(l.jsx)(O,{minisearches:n})})};var y=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1];return Object(l.jsxs)(l.Fragment,{children:[!n&&Object(l.jsx)("button",{onClick:function(){return c(!0)},children:"Listo para descargar muchos megas de datos"}),n&&Object(l.jsx)(v,{})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};a.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(y,{})}),document.getElementById("root")),w()}},[[20,1,2]]]);
//# sourceMappingURL=main.dac31e75.chunk.js.map